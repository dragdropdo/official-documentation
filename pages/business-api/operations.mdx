---
title: "Operations"
description: "Create file operations such as convert, compress, merge, zip, and PDF utilities."
---

# Operations

Operations are created via:

```http
POST /v1/biz/do
X-D3-API-Key: <your-api-key>
Content-Type: application/json
```

## Request schema (`ExternalDoRequest`)

```json
{
  "action": "convert",
  "file_keys": ["file_key_1", "file_key_2"],
  "parameters": {
    "convert_to": "png"
  },
  "notes": {
    "user_id": "user-123",
    "source": "api"
  }
}
```

## Create an operation

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "convert",
    "file_keys": ["file_key_1"],
    "parameters": {
      "convert_to": "png"
    },
    "notes": {
      "user_id": "user-123",
      "source": "api"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Using convenience method
const operation = await client.convert(["file_key_1"], "png", {
  user_id: "user-123",
  source: "api",
});

// Or using createOperation
const operation = await client.createOperation({
  action: "convert",
  fileKeys: ["file_key_1"],
  parameters: {
    convert_to: "png",
  },
  notes: {
    user_id: "user-123",
    source: "api",
  },
});

console.log("Main task ID:", operation.mainTaskId);
```

</CodeGroup>

- `action` (**required**) – the operation to perform:
  - `"convert"`
  - `"compress"`
  - `"merge"`
  - `"zip"`
  - `"share"`
  - `"lock"`
  - `"unlock"`
  - `"reset_password"`
- `file_keys` (**required**) – array of one or more file keys returned by upload.
- `parameters` (optional) – action‑specific parameters (see below).
- `notes` (optional) – arbitrary key‑value metadata persisted alongside the external operation.

**Response (`ExternalDoResponse`):**

```json
{
  "main_task_id": "task_abc123"
}
```

Use `main_task_id` for status polling and correlating webhook notifications.

## Supported operations

Before creating an operation, you can validate that a given extension and action are supported:

<CodeGroup>
```bash cURL
curl -X GET "https://api.d3.com/v1/biz/supported-operation?ext=pdf&action=convert&convert_to=png" \
  -H "X-D3-API-Key: your-api-key"
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Check if convert to PNG is supported
const supported = await client.checkSupportedOperation({
  ext: "pdf",
  action: "convert",
  parameters: { convert_to: "png" },
});

console.log("Supported:", supported.supported);
console.log("Available actions:", supported.availableActions);
```

</CodeGroup>

Server‑side this is backed by `SupportedOperationRequest` / `SupportedOperationResponse`:

```ts
type SupportedOperationRequest = {
  ext: string;
  action?: string;
  parameters?: Record<string, unknown>;
};

type SupportedOperationResponse = {
  supported: boolean;
  ext: string;
  action?: string;
  available_actions?: string[];
  parameters?: Record<string, unknown>;
};
```

Example responses:

- **Only `ext` provided** – returns `available_actions` for that extension.
- **`ext` + `action`** – returns `supported` + `parameters` metadata, such as:
  - valid `convert_to` targets for `convert`
  - valid `compression_value` options for `compress`

## Action‑specific parameters

### Convert

- `convert_to` (**required**) – target format (e.g. `pdf`, `png`, `docx`).

Common use cases:

- Document: `docx → pdf`, `pdf → docx`, `pptx → pdf`.
- Image: `jpg → png`, `png → webp`.
- Media: `mp4 → mp3`, `wav → mp3`.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "convert",
    "file_keys": ["file_key_1"],
    "parameters": {
      "convert_to": "pdf"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Convert PDF to PNG
const operation = await client.convert(["file_key_1"], "png");

// Convert DOCX to PDF
const operation = await client.convert(["file_key_1"], "pdf");
```

</CodeGroup>

### Compress

- `compression_value` – compression level such as `recommended`, `high`, or `low` (see supported‑operation metadata).

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "compress",
    "file_keys": ["file_key_1"],
    "parameters": {
      "compression_value": "recommended"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Compress with recommended level
const operation = await client.compress(["file_key_1"], "recommended");
```

</CodeGroup>

### Merge

Merges multiple compatible files (typically PDFs) into a single output file.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "merge",
    "file_keys": ["file_key_1", "file_key_2"]
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Merge multiple PDFs
const operation = await client.merge(["file_key_1", "file_key_2"]);
```

</CodeGroup>

### Zip

Creates a zip archive containing the given files.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "zip",
    "file_keys": ["file_key_1", "file_key_2"]
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Create zip archive
const operation = await client.zip(["file_key_1", "file_key_2"]);
```

</CodeGroup>

### Share

Generates shareable links for the specified files. Additional behavior may be controlled via `notes`.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "share",
    "file_keys": ["file_key_1"],
    "notes": {
      "expires_in_days": "7"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Generate shareable links
const operation = await client.share(["file_key_1"], {
  expires_in_days: "7",
});
```

</CodeGroup>

### Lock PDF

Protects PDFs with a password.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "lock",
    "file_keys": ["file_key_1"],
    "parameters": {
      "password": "secure-password"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Lock PDF with password
const operation = await client.lockPdf(["file_key_1"], "secure-password");
```

</CodeGroup>

### Unlock PDF

Removes password protection from PDFs.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "unlock",
    "file_keys": ["file_key_1"],
    "parameters": {
      "password": "current-password"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Unlock PDF
const operation = await client.unlockPdf(["file_key_1"], "current-password");
```

</CodeGroup>

### Reset PDF password

Changes the password on password‑protected PDFs.

<CodeGroup>
```bash cURL
curl -X POST https://api.d3.com/v1/biz/do \
  -H "X-D3-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "reset_password",
    "file_keys": ["file_key_1"],
    "parameters": {
      "old_password": "old",
      "new_password": "new"
    }
  }'
```

```ts Node.js SDK
import { D3Client } from "d3-node-client";

const client = new D3Client({
  apiKey: "your-api-key",
  baseURL: "https://api.d3.com",
});

// Reset PDF password
const operation = await client.resetPdfPassword(
  ["file_key_1"],
  "old-password",
  "new-password"
);
```

</CodeGroup>
